#Architecture #DDD #개발서적 

## 네 개의 영역
**표현(Presentation), 응용(Application), 도메인([[Domain]]), 인프라스트럭처(Infrastructure)**는 아키텍처를 설계할 때 출현하는 전형적인 네 가지 영역이다.

## 표현 영역
표현 영역은 Spring에서 Controller라고 생각하면 된다. 사용자의 요청을 해석한다.

![[4layers.png]]

> [!example]+ 
> URL, 요청 파라미터, 쿠키, 헤더 등

## 응용 영역
응용 영역은 Spring에서 Service라고 생각하면 된다. 하지만 응용 서비스는 로직을 직접 수행하기보다는 **도메인 모델에 로직 수행을 위임한다.**

> [!info]+ 
> 응용 영역은 도메인 모델을 이용해서 **사용자에게 제공할 기능을 구현**한다.  실제 도메인 로직 구현은 도메인 모델에 위임한다.

![[service.png]]
## 도메인 영역
도메인 영역은 도메인 모델을 구현한다. 도메인 모델은 **도메인의 핵심 로직을 구현**한다.

## 인프라스트럭처
인프라스트럭처는 구현 기술에 대한 것을 다룬다. 논리적인 개념을 표현하기보다는 **실제 구현**을 다룬다.
표현 영역, 응용 영역, 도메인 영역을 지원한다. 다른 영역에서 필요로 하는 프레임워크, 구현 기술, 보조 기능을 지원한다.

> [!example]+ 
> + RDBMS 연동
> + Message queue
> + Redis
> + RestApi호출
![[infrastructure.png]]


## 영역 사이의 관계 : 인프라스트럭처에 의존
도메인 영역, 응용 영역, 표현 영역은 **구현 기술을 사용한 코드를 직접 만들지 않는다.** 대신 인프라스트럭처 영역에서 제공하는 기능을 사용해서 필요한 기능을 개발한다.

> [!important]+ 
> 응용 영역에서 DB에 보관된 데이터가 필요하다면 인프라스트럭처 영역의 DB 모듈을 사용하여 데이터를 읽어온다. 하지만 짚고 넘어가야 할 점은, **표현, 응용, 도메인 계층이 상세한 구현 기술을 다루는 인프라스트럭처 계층에 종속된다는 점**이다.
> ![[4. Archive/img/Book/도메인 주도 개발 시작하기/dependency.png]]

이렇게 인프라스트럭처에 종속되는 방식은 동작은 하겠지만 두 가지의 문제점이 있다.

> [!summary]+ 
> 1. 응용 계층만 테스트하기 어렵다.
> 2. 구현 방식을 변경하기 어렵다.(= 기능 확장에 어려움이 있다.)

이 문제의 해답은 [[DIP]]에 있다.

> [!note]+ 
> 무조건 인프라스트럭처에 대한 의존을 없앨 필요는 없다. 가장 좋은 예시는 @Transactional이다.
> 
> 구현의 편리함은 DIP가 주는 다른 장점만큼 중요하기 때문에 DIP의 장점을 해치지 않는 범위에서 응용 영역과 도메인 영역에서 구현 기술에 대한 의존을 가져가는 것이 나쁘지 않다고 생각한다.