## SHA
암호화 해시 함수(secure hash function)로, 입력 데이터를 고정된 길이의 해시값(메시지 다이제스트)으로 변환하는 알고리즘

**SHA-1 (Secure Hash Algorithm 1)**

- 160비트(20바이트) 해시값을 생성한다.
- 미국 NSA가 설계했고, 한때 다양한 보안 프로토콜(TLS, SSL 등)에 널리 사용되었다.
- 하지만 2005년 이후로 충돌 공격(서로 다른 입력이 같은 해시값을 생성)이 실현 가능해지면서 보안상 취약점이 드러났고, 현재는 더 이상 안전하지 않음!

**SHA-256**

- 256비트(32바이트) 해시값을 생성한다.
- SHA-2 패밀리(알고리즘 집합)에 속하며, SHA-1의 보안 취약점을 보완해 개발됨.
- 높은 충돌 저항성과 역산 불가능성(해시값만으로 원본 복원이 불가)을 갖추고 있어, 현재 비밀번호 저장, 디지털 서명, 블록체인 등에서 널리 사용됨.
- SHA-256은 현재까지 실질적인 보안 취약점이 발견되지 않았으며, 안전한 해시 함수로 평가받고 있다.


**SHA-3**
- SHA-3(Keccak 기반)은 2015년 NIST에 의해 표준화된 최신 해시 함수
- 입력 데이터에 대해 고정된 길이의 해시값을 생성하며, SHA-2와는 완전히 다른 내부 구조(Keccak 스펀지 구조)를 사용해 설계됨.
- SHA-3는 SHA-1, SHA-2와 비교해 더욱 강력한 보안성을 제공하며, 충돌 공격에 대한 저항성이 높다.


### keccak256
+ 이더리움은 **SHA3(암호화 해시 함수)** 의 한 버전인 keccak256를 내장 해시 함수로 가지고 있다
+ 해시 함수는 기본적으로 입력 스트링을 랜덤 256비트 16진수로 매핑한다

```Java
//6e91ec6b618bb462a4a6ee5aa2cb0e9cf30f7a052bb467b0ba58b8748c00d2e5
keccak256("aaaab");

//b1f078126895a1424524de5321b339ab00408010b7cf0e6ed451514981e58aa9
keccak256("aaaac");
```

## 합의 프로토콜(= 합의 알고리즘)
+ 분산된 시스템에서 다수의 노드가 동의하여 블록체인 네트워크의 상태를 동기화하고 데이터를 처리하는 규칙이나 알고리즘

### 작업 증명(PoW, Proof of Work)
+ 도착하기 위해 상당한 노력이 필요한 **수학적 문제에 대한 답을 해결하는 과정**
+ **풀기 어려운 문제를 빨리 해결한 사람에게 블록을 생성할 수 있는 권한을 주고 그 보상으로 코인을 제공하는 알고리즘**
+ 해당 문제는 해시 함수의 결과값이 특정 값보다 작아지도록 하는 입력 값([[Nonce]])을 찾는 문제
+ 비트코인의 경우 약 10분정도 걸려 풀릴 수 있도록 난이도를 조절해 놓았으며, Nonce값을 만드는 데에는 **SHA-256** 알고리즘이 사용된다
+ 이더리움은 **SHA3(암호화 해시 함수)** 의 한 버전인 keccak256를 내장 해시 함수로 가지고 있다
+ 보안성이 높고, 모든 블록 간 정보 공유를 통해 이중지불 문제를 해결한다

### PoW의 한계
+ Nonce값을 구하기 위해서는 많은 비용이 들며, 채굴자들은 GPU 등을 이용하여 구한다
+ 해시 함수는 단방향 암호화 기술이므로 결과값으로 입력 값을 찾을 수 없기 때문에 결과값이 **나올 때까지 입력 값을 바꿔 지속적으로 실행** 해야 한다
+ 51% 공격, Pow 파이널리티 불확실성, 성능 한계 등의 문제점이 있다

### 지분 증명(PoS, Proof of Stake)
+ 이더리움이 PoW에서 PoS로 넘어가고 있다
+ 참여자의 코인 지분을 기준으로 블록을 생성한다(= 코인 지분이 많을수록 유리하다)
+ 비잔티움 결함 문제를 해결하는데 적합하다
+ 보안적이고, 비용적으로도 효율적이다