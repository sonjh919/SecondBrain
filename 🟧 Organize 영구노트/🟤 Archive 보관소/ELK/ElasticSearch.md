#ELK #Elasticsearch 

## ElasticSearch
**실시간 분산 검색 및 분석 엔진**으로, Apache Lucene을 기반으로 한 오픈 소스 검색 및 분석 엔진이다. [[REST API]]를 통해 사용되며, [[JSON]] 문서를 색인화하고 **검색, 질의, 분석, 집계** 등을 위한 기능을 제공한다. 정형, 비정형, 위치정보, [[Metric]] 등 원하는 방법으로 다양한 유형의 검색을 수행하고 결합할 수 있다.

> [!summary]+ 
> 1. Lucene 기반 검색엔진
> 2. [[Logstash]]를 통해 수신한 데이터의 저장소 역할
> 3. JSON 기반의 분산형 RESTful 검색엔진

> [!check]+ 
> 로그 및 이벤트 분석, 검색 엔진, 실시간 분석, 모니터링

## ElasticSearch의 기본 컨셉
> [!note]+ 검색 엔진
> + 단순한 텍스트 매칭 검색이 아닌 본격적인 전문 검색(full-text search)가 가능하며 다양한 종류의 검색 쿼리를 지원한다.
> + 검색 엔진이기 때문에 **[[역색인]]을 사용하여 검색 속도도 매우 빠르다.**
> + 다양한 [[애널라이저]](analyzer)를 조합하여 여러 비즈니스 요구사항에 맞는 **색인을 구성할 수 있고 형태소 분석도 가능**하다.

> [!note]+ 분산 처리
> 데이터를 여러 노드에 분산 저장하며 검색이나 집계 작업 등을 수행할 때도 **분산 처리를 지원**한다.

> [!note]+ 고가용성 제공
> ElasticSearch는 고가용성(High Availability)을 제공한다. 클러스터를 구성하고 있는 일부 노드에 장애가 발생해도 **복제본 데이터를 이용해 중단 없이 서비스를 지속**할 수 있다. 이때 ElasticSearch는 다시 복제본을 만들어 복제본의 개수를 유지하면서 노드 간 데이터의 균형을 자동으로 맞춘다.

> [!note]+ 수평적 확장성
> 더 많은 처리 능력이 필요할 때에는 새 노드에 ElasticSearch를 설치하여 클러스터에 참여시키는 것만으로도 확장이 된다. 새 노드에 데이터를 복제하거나 옮기는 작업도 ElasticSearch가 자동 수행한다.

> [!note]+ JSON 기반의 REST API 제공
> ElasticSearch는 **JSON 형태의 문서를 저장, 색인 검색**한다. 환경에 구애받지 않고 **HTTP**를 통해 [[JSON]] 기반의 REST API로 쉽게 이용할 수 있다.

> [!note]+ 데이터 안정성
> **높은 데이터 안정성**을 제공한다. 데이터 색인 후 200OK를 받았다면 그 데이터는 확실히 디스크에 기록된다.

> [!note]+ 다양한 플러그인을 통한 기능 확장 지원
> 다양한 플러그인을 이용해 기능을 확장하거나 변경할 수 있다. 핵심 기능들도 플러그인을 통해 제어할 수 있도록 설계됐다.

> [!note]+ 준실시간 검색
> **준실시간 검색(near real-time search)** 을 지원한다. 데이터를 색인하자마자 조회하는 것은 가능하지만, 데이터 색인 직후의 검색 요청은 성공하지 못할 가능성이 높다. ElasticSearch가 역색인을 구성하고 이 역색인으로부터 검색이 가능해지기까지 시간이 걸리기 때문이다.
> 
> 기본 설정으로 ElasticSearch를 운영할 경우 최대 1초 정도의 시간이 걸린다. 이 특성을 이해하고 서비스를 설계해야 한다.

> [!note]+ 트랜잭션이 지원되지 않음
> ElasticSearch는 RDBMS와는 다르게 트랜잭션을 지원하지 않는다.

> [!note]+ 사실상 조인을 지원하지 않음
> ElasticSearch는 기본적으로 조인을 염두에 두고 설계되지 않았다. join이라는 특별한 데이터 타입이 있지만 이는 굉장히 제한적인 상황을 위한 기능이며 성능도 떨어진다. 기본적으로 RDBMS와는 다르게 데이터를 비정규화해야한다.

