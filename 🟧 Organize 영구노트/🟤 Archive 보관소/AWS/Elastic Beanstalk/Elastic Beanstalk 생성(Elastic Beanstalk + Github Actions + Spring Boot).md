#AWS #ElasticBeanstalk #Git #Github_Action #SpringBoot #CI/CD 


애플리케이션 생성을 눌러 시작하자. 건드려야 하는 부분 위주로 넣었다.

![[Beanstalk1.png]]

## 1. 환경 구성
### 애플리케이션 정보
애플리케이션 이름을 정하자. 환경 이름은 알아서 세팅되지만, 바꾸고 싶으면 바꿔도 된다. 

![[Beanstalk2.png]]

### 플랫폼
나는 Java 17버전을 사용할 것이기 때문에, 이에 맞추어 세팅해준다.

![[Beanstalk3.png]]

### 애플리케이션 코드
샘플 애플리케이션이 디폴트로 되어 있을 텐데, 그대로 두자. 처음 만들 때에는 샘플용 애플리케이션이 추가되지만, cicd를 이용해 내 프로젝트로 덮어씌워지기 때문이다.

![[Beanstalk4.png]]

### 사전 설정
프리티어 사용 가능이라고 괜히 알려주는게 아니다. 만약 Beanstalk가 안만들어진다고 여기를 건드려봤다가는 나처럼 돈이 빠져나가는 현상을 경험할 수 있을 것이다.. 우리같은 초보는 사용자 지정 구성으로 절대 원하는 대로 세팅이 된다는 생각을 버리자. 어떤 설정을 잘못해서 돈이 나갈지는 아무도 모른다..

![[Beanstalk5.png]]

## 2. 서비스 액세스 구성
새 서비스 역할 생성 및 사용으로 하면 서비스 역할을 자동으로 설정해 준다. 이미 한번 만들어본 적이 있다면 기존 서비스의 역할을 사용해도 무방하다.

EC2 키 페어와 EC2 인스턴스 프로파일을 선택하자. 특히 인스턴스 프로파일을 잘 설정해 놓아야 하는데, 이에 대한 내용은 따로 정리해 두겠다.

+ [[EC2 키 페어]]
+ [[EC2 인스턴스 프로파일]]

![[Beanstalk6.png]]

## 3. 네트워킹, 데이터베이스 및 태그 설정
처음에는 -표시로 되어 있을 텐데, 미리 설정되어 있는 VPC를 선택하도록 하자.

![[Beanstalk7.png]]

### 인스턴스 설정
퍼블릭 IP 주소를 활성화 시키고, 모든 서브넷을 체크하도록 하자.

![[Beanstalk8.png]]

### 데이터베이스
먼저 데이터베이스 서브넷 역시 모두 체크하자.

![[Beanstalk9.png]]

RDS를 사용할 것이기 때문에, 활성화를 시키자. 나는 mysql을 사용할 예정이라 이에 맞게 세팅을 해준다. 사용자 이름과 암호는 기억해 두도록 하자. 이 밑에 가용성과 데이터베이스 삭제 정책이 있을 텐데, 건들지 말고 그냥 두도록 하자.

![[Beanstalk10.png]]

## 4. 인스턴스 트래픽 및 크기 조정 구성
건들 부분이 없다. 그냥 한번씩 읽어보고 넘어가도록 하자. 여기서 뭘 건드는 순간 돈이 나갈 확률이 매우 높다. 혹시 로드 밸런싱을 사용하고 싶다면 그게 맞게 변경해보도록 하자.

## 5. 상태 보고
모니터링을 기본으로 설정하고, 관리형 업데이트도 비활성화 하였다. 이어서 자기가 사용하는 이메일 주소를 이메일 알림 부분에 입력하고 넘어가도록 하자. 환경 속성은 나중에 RDS가 만들어지면 추가할 것이다.

![[Beanstalk11.png]]![[Beanstalk12.png]]

## 6. 검토
지금까지 세팅했던 내용이 정리되어 나오니, 한번 읽어보고 제출하도록 하자. 그러면 정상적으로 BeanStalk가 생성될 것이다.
만약 성공한다면, 다음과 같이 상태가 Green으로 변할 것이다. 만약 문제가 생긴다면, 이벤트를 확인하고 에러를 찾아 트러블 슈팅을 진행하도록 하자.

![[Beanstalk13.png]]