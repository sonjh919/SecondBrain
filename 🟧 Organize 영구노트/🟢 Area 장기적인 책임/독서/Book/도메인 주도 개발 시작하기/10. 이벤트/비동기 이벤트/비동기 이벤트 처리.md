#Architecture #DDD #Book

## 비동기 이벤트 처리
> [!example]+ 
> 회원 가입 신청을 하면 검증을 위해 이메일 보내는 서비스가 많다. 이메일은 몇 초, 10~20초 후에 도착해도 문제 되지 않는다. 이메일을 받지 못하면 다시 받을 수 있는 기능을 이용하면 된다.
> 
> 비슷하게 결제 시스템도 바로 환불 처리를 하지 않아도 된다. 주문 취소를 동작한 후에 결제 취소는 나중에 이루어져도 문제 없을 수 있다.

결국 많은 요구사항들이 **A하면 최대 언제까지 B하라**라는 요구사항인 경우가 많음을 알 수 있다. 즉, 일정 시간 안에만 후속 조치를 저리하면 되는 경우가 많다. 게다가 **A 하면 이어서 B하라**는 요구사항은 B를 하는 데 실패하면 일정 간격으로 재시도를 하거나 수동 처리를 해도 상관없는 경우가 있다.

> [!check]+ 
> 즉, `A 하면 이어서 B하라` 는 `A하면 최대 언제까지 B하라`로 바꿀 수 있다.

이렇게 바꿀 수 있는 요구사항은 이벤트를 비동기로 처리하는 방식으로 구현할 수 있다.
다시 말해, A 이벤트가 발생하면 별도 스레드로 B를 수행하는 방식으로 요구사항을 구현할 수 있다.

### 구현 방식
이벤트를 비동기로 구현할 수 있는 방법은 다양한데, 다음과 같이 4가지 방식이 있을 수 있다.

> [!summary]+ 
> 1. [[로컬 핸들러를 비동기로 실행]]하기
> 2. [[Message Queue]]를 사용하기
> 3. [[이벤트 저장소와 이벤트 포워더]] 사용하기(이벤트 저장소 사용)
> 4. [[이벤트 제공 API]] 사용하기(이벤트 저장소 사용)


> [!missing]+ 
> 이벤트 저장소 구현은 나중에 추가할 예정