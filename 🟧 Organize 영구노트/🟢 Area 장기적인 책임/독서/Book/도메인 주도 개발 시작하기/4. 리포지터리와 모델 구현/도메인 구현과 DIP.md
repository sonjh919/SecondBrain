#Architecture #DDD #Book #jpa 


## 도메인 구현과 DIP
JPA 를 사용할 경우 도메인에 @Entity, @Table 등 **구현 기술에 특화된 어노테이션**을 사용하고 있다.
[[DIP]] 에 따르면 이는 구현 기술에 속하므로 도메인 모델이 구현 기술인 JPA 에 의존하는 것이다.

> [!important]+ 
> 즉 도메인이 인프라에 의존하고 있는 것이다.

도메인에서 구현 기술에 대한 의존을 없애려면 구현 클래스를 인프라에 위치시켜야한다. 하지만 DIP 를 적용하는 이유는 저수준 구현이 변경되어도 고수준이 영향 받지 않도록 하기 위함인데, 리포지터리와 도메인 모델의 구현 기술은 거의 바뀌지 않는다.

따라서 이런 거의 **변경이 없는 경우에도 변경을 미리 대비하는것은 오버엔지니어링일 수 있다.**

저자의 경우 애그리거트, 리포지터리 등 도메인 모델을 구현할때  JPA 전용 어노테이션을 사용하는것으로 타협했다.

> [!check]+ 
> DIP 를 완전히 지키면 좋겠지만 개발 편의성과 실용성을 가져가면서 구조적인 유연함을 유지했으며 복잡도를 높이지 않으면서 구현 기술에  따른 제약이 낮다면 합리적인 선택이라고 생각한다.