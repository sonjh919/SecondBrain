#OOP #Book

코드 재사용 == 중복 코드 제거

객체지향에서의 재사용 : 상속과 합성

### DRY(Don't Repeat Yourself) 원칙
중복 코드는 변경을 방해한다. 동일한 지식을 중복하지 말자.
== 한번, 단 한번 원칙 == 단일 지점 제어 원칙

### 상속
상속은 재사용성이 있지만 결합도를 높인다. 상속이 초래하는 부모 클래스와 자식 클래스 사이의 강한 결합이 코드를 수정하기 어렵게 만든다.

주의점 1
자식 클래스의 메서드 안에서 super 참조를 이용해 부모 클래스의 메서드를 직접 호출할 경우 두 클래스는 강하게 결합된다. super 호출을 제거할 수 있는 방법을 찾아 결합도를 제거하라.

### 취약한 기반 클래스 문제
상속 관계로 연결된 자식 클래스가 부모 클래스의 변경에 취약해지는 현상 : 취약한 기반 클래스 문제
부모 클래스에 변경이 생긴다면? 모든 자식클래스가 문제가 없는지 확인해야함!!

결합도를 높이고 캡슐화를 약화시킨다.

**객체지향의 기반은 캡슐화를 통한 변경의 통제**

주의점2
상속받은 부모 클래스의 메서드가 자식 클래스의 내부 구조에 대한 규칙을 깨트릴 수 있다. ex) vector와 stack

주의점 3
자식 클래스가 부모 클래스의 메서드를 오버라이딩할 경우 부모 클래스가 자신의 메서드를 사용하는 방법에 자식 클래스가 결합될 수 있다.

주의점 4
클래스를 상속하면 결합도로 인해 자식 클래스와 부모 클래스의 구현을 영원히 변경하지 않거나, 동시에 변경하거나 둘 중 하나를 선택할 수 밖에 없다.

### 상속 피해 최소화하기
가장 일반적인 방법은 자식 클래스가 부모 클래스의 구현이 아닌 추상화에 의존하도록 만드는 것. 정확하게는 부모 클래스와 자식 클래스 모두 추상화에 의존하도록 수정해야 한다.

(333p)
1. 차이를 메서드로 추출하라
2. 중복 코드를 부모 클래스로 올려라(위로 올리기 전략) -> 이후 남은 클래스는 서로 다른 변경의 이유
3. 의도를 드러내는 이름 선택하기

### 차이에 의한 프로그래밍
상속이 강력한 이유는 익숙한 개념을 이용해서 새로운 개념을 쉽고 빠르게 추가할 수 있기 때문. 이것을 차이에 의한 프로그래밍이라 한다.

차이에 의한 프로그래밍의 목표는 중복 코드를 제거하고 코드를 재사용하는 것이다.

하지만, 코드 재사용을 위해 맹목적으로 상속을 사용하는 것은 위험하다. 정말 필요한 경우에만 상속을 사용해야 한다.
상속은 사실 코드 재사용과 관련된 대부분의 경우에 좋은 해결 방법이 아니다. "합성"이 더 좋은 방법이다.