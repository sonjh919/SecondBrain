#Book 

## TDD 주의사항

### 변수나 필드를 사용해서 기댓값 표현하지 않기
테스트에 성공하더라도 테스트 코드를 처음 보는 사람은 변수와 필드를 오가며 테스트 코드를 이해해야 한다. 단언에 변수와 필드 대신 실제 값을 사용하면 객체 생성 시 사용한 값이 무엇인지 알기 위해 필드와 변수를 오갈 필요가 없다.

### 두 개 이상을 검증하지 않기
하나의 테스트 메서드가 한 가지만 검증하도록 하자.

### 정확하게 일치하는 값으로 모의 객체 설정하지 않기
모의 객체는 가능한 범용적인 값을 사용해서 기술해야 한다. 한정된 값에 일치하도록 모의 객체를 사용하면 약간의 코드 수정만으로도 테스트는 실패한다.

### 과도하게 구현 검증하지 않기
내부 구현 검증이 나쁜 것은 아니지만 한 가지 단점이 있다. 구현을 조금만 변경해도 테스트가 깨질 가능성이 커진다는 것이다. 내부 구현은 언제든 바뀔 수 있기 때문에 테스트 코드는 **내부 구현보다 실행 결과를 검증해야 한다.**

### setUp()을 이용하여 중복된 상황을 설정하지 않기

> [!summary]+ 
> 1. 코드를 위아래로 보면서 테스트를 검증해야 한다. -> 가독성 저하
> 2. 테스트가 깨지기 쉬운 구조가 된다.

테스트 메서드는 검증을 목표로 하는 하나의 완전한 프로그램이어야 한다. 각 테스트 메서드는 별도 프로그램으로서 검증 내용을 스스로 잘 설명할 수 있어야 한다. **상황 구성 코드가 테스트 메서드 안에 위치해야 한다.**

### 통합 테스트에서 데이터 공유 주의하기
setup 상황과 비슷한 것으로 통합 테스트의 DB 데이터 초기화가 있다. 통합 테스트 코드를 만들 때에는 다음의 두 가지로 초기화 데이터를 나눠서 생각해야 한다.

모든 테스트가 같은 값을 사용하는 데이터 : ex) 코드값 데이터
테스트 메서드에서만 필요한 데이터 : ex) 중복 ID 검사를 위한 회원 데이터

### 통합 테스트의 상황 설정을 위한 보조 클래스 사용하기
테스트 메서드에서 직접 상황을 구성하면서 코드 중복을 없애는 방법이다.

### 실행 환경이 다르다고 실패하지 않기
ex) 파일 경로, os 차이 등

### 실행 시점이 다르다고 실패하지 않기
ex) LocalDateTime.now(), 랜덤 테스트

### 필요하지 않은 값은 설정하지 않기

### 단위 테스트를 위한 객체 생성 보조 클래스
단위 테스트 작성 시 상황 구성을 위해 필요한 데이터가 복잡할 때가 있다. 이 때, 테스트를 위한 객체 생성 클래스(팩토리)를 따로 만들면 복잡함을 줄일 수 있다. 빌더 패턴을 사용하면 유연함을 더할 수 있다.

### 조건부로 검증하지 않기
테스트는 성공하거나 실패해야 한다. 조건에 따라서 단언을 하지 않으면 그 테스트는 성공하지도, 실패하지도 않은 테스트가 된다.

### 통합 테스트는 필요하지 않은 범위까지 연동하지 않기

### 더 이상 쓸모 없는 테스트 코드
특정 클래스의 사용법을 익히기 위해 작성한 테스트 코드는 오래 유지할 필요가 없으므로 삭제한다. 단지 테스트 커버리지를 높이기 위한 목적으로 작성한 테스트 코드도 유지할 필요가 없다.