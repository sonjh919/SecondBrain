#Architecture #DDD #Book

## Message Queue
비동기 이벤트 처리의 또 다른 방법은 카프카(Kafka)나 래빗MQ(RabbitMQ)와 같은 메시징 시스템을 사용하는 것이다.

> [!summary]+ 
> 1. 이벤트가 발생하면 이벤트 디스패처는 이벤트를 메시지 큐에 보낸다. 
> 2. 메시지 리스너는 알맞은 이벤트 핸들러를 이용해서 메시지를 처리한다.

> [!check]+ 
> 이 때 이벤트를 메시지 큐에 저장하는 과정과 메시지 큐에서 이벤트를 읽어와 처리하는 과정은 별도 스레드나 프로세스로 처리된다.

![[event5.png]]

메시지 큐를 사용하면 일반적으로 이벤트를 발생시키는 주체와 이벤트 핸들러가 별도 프로세스에서 동작한다. 이는 이벤트 발생 JVM과 이벤트 처리 JVM이 다르다는 것을 의미한다. **동일한 JVM에서 이벤트 발생 주체와 이벤트 핸들러가 메시지 큐를 이용해서 이벤트를 주고받을 수 있지만 시스템을 복잡하게 만들 뿐이다.**

> [!tip]+ 
> 해당 방법은 MSA 형태로 각 앱 서버가 분리되어 있을 때 사용하기 좋은 방법이다.