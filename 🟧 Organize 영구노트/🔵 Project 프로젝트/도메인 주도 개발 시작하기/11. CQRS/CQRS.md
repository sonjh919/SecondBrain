#Architecture #DDD #Book

## CQRS(Command Query Responsibility Segregation)
> [!info]+ 
> 상태를 변경하는 명령(command)를 위한 모델과 상태를 제공하는 조회(Query)를 위한 모델을 분리하는 패턴이다.

![[cqrs2.png]]


## CQRS 장단점
> [!note]+ 장점
> 1. 조회 성능을 위한 코드가 명령 모델에 없으므로 명령 모델을 구현 할 때 도메인 자체에 집중할 수 있다.
> 2. 조회 성능을 향상시키는 데 유리하다.  즉 조회 특화용 기술 적용이 용이하다.

> [!example]+ 
> 명령 모델은 트랜잭션을 지원하는 RDBMS를 사용하고, 조회 모델은 조회 성능이 좋은 메모리 기반 NoSQL을 사용할 수도 있다. 이 때, 두 저장소 간 데이터 동기화는 [[🟠 Project/Book/도메인 주도 개발 시작하기/10. 이벤트/이벤트|이벤트]]를 이용하여 처리한다.

> [!check]+ 
> 대규모 트래픽이 발생하는 웹 서비스는 알게 모르게 CQRS를 적용하게 된다. 단지 명시적으로 명령 모델과 조회 모델을 구분하지 않았을 뿐이다. 조회 속도를 높이기 위해 별도 처리를 하고 있다면 명시적으로 두 모델을 분리하자.

> [!note]+ 단점
> 1. 구현 코드량이 늘어난다.
> 2. 더 많은 구현 기술이 필요하다. 명령과 조회 모델을 다른 구현 기술을 사용하기도 하고 다른 저장소를 사용하기도 한다. 또한 [[Message Queue]]시스템을 도입할 수도 있다.

**유지보수 비용이나 장단점을 잘  고려해서 CQRS패턴 도입 여부를 결정하자.**