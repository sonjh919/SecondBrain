### 자바 8의 등장  이전
자바에서 다른 코어를 활용하기 위해서는 스레드를 사용하는 것이 좋다.  하지만 관리하기 어렵고 많은 문제가 발생하여 자바는 병렬 실행 환경을 쉽게 관리하고 에러가 덜 발생하는 방향으로 진화하려 노력했다.

자바 8 : 간결한 코드, 멀티코어 프로세서의 쉬운 활용 -> 스트림, 메서드에 코드를 전달하는 간결 기법(메서드 참조와 람다), 인터페이스의 디폴트 메서드

고전 객체지향 : 값 변화에 집중 -> 자바8 : 함수형 프로그래밍

> [!check]+ 함수형 프로그래밍
> 함수를 값으로 취급. 우리가 하려는 작업이 최우선시되며 어떻게 수행하는지는 별개의 문제로 취급.

---

## 자바 8에서 제공하는 3가지 프로그래밍 개념
### [[🟧 Organize 영구노트/🟠 Project 프로젝트/모던 자바 인 액션/Part1/stream|stream]] 처리(4~7)
한 번에 한 개씩 만들어지는 연속적인 데이터 항목들의 모임
스트림 api의 핵심 : 우리가 하려는 작업을 db 질의처럼 고수준으로 추상화하여 일련의 스트림으로 만들어 처리할 수 있다는 것.
스트림 파이프라인을 이용해서 입력 부분을 여러 cpu 코어에 쉽게 할당할 수 있다.
스레드라는 복잡한 작업을 사용하지 않으면서도 공짜로 병렬성을 얻을 수 있다.

### [[동작 파라미터화]]로 메서드에 코드 전달하기(2, 3, 18, 19)
코드 일부를 API로 전달하는 것. 메서드(우리 코드)를 다른 메서드의 인수로 넘겨주는 기능

스트림 api는 연산의 동작을 파라미터화할 수 있는 코드를 전달한다는 사상에 기초

-> [[🟧 Organize 영구노트/🟠 Project 프로젝트/모던 자바 인 액션/Part1/함수형 인터페이스|함수형 인터페이스]]

### 병렬성과 공유 가변 데이터(18, 19)
"병렬성을 공짜로 얻을 수 있다" -> 스트림 메서드로 전달하는 코드의 동작 방식을 조금 바꿔야 한다.

synchronized는 시스템 성능에 악영향을 미친다. 하지만 공유되지 않은 가변 데이터, 메서드, 함수코드를 다른 메서드로 전달하는 두 가지 기능은 함수형 프로그래밍 패러다임의 핵심적인 사항.

---

## 자바 8에서 추가된 새로운 개념

### 자바 함수
**메서드를 전달할 수 있다는 것**
자바 8에서는 함수를 값처럼 취급. -> 메서드와 람다를 일급 시민으로.
[[메서드 참조]] :: 이 메서드를 값으로 사용하라
[[람다 표현식]]: 익명 함수 -> 간결한 코드 구현

람다 문법 형식으로 구현된 프로그램을 함수형 프로그래밍, 즉 '함수를 일급값으로 넘겨주는 프로그램을 구현한다'라고 한다.

메서드를 값으로 전달할 때, 한두번 사용할 메서드를 매번 정의하는 것은 귀찮은 일 -> 람다

### stream
외부 반복이 아닌 내부 반복으로 라이브러리 내부에서 모든 데이터 처리

'컬렉션을 처리하면서 발생하는 모호함과 반복적인 코드 문제', '멀티코어 활용 어려움'이라는 2가지 문제를 모두 해결.

컬렉션 : 어떻게 데이터를 저장하고 접근할지에 중점을 둠
스트림 : 데이터에 어떤 계산을 할 것인지 묘사하는 것에 중점을 둠. 스트림은 스트림 내의 요소를 쉽게 병렬로 처리할 수 있는 환경을 제공한다는 것이 핵심.

컬렉션을 필터링할 수 있는 가장 빠른 방법 : 컬렉션을 스트림으로 바꾸고, 병렬로 처리한 다음에, 리스트로 다시 복원하는 것.

스트림과 람다를 이용하면 병렬성을 공짜로 얻을 수 있다.

컬렉션으로 거대한 리스트 처리? 
서로 다른 cpu 코어에 작업을 각각 할당해서 처리 시간 줄이기
전통 자바는 하나의 cpu만 사용하면서 나머지 cpu를 낭비시키는 것이 문제.
자바 8은 이러한 문제 해결하는 새로운 프로그래밍 스타일 제공

이전 자바 버전에서 제공하는 스레드 api로 멀티스레딩 코드를 구현하여 병렬성을 이용하는 것은 쉽지 않음.
-> 포킹 단계 : 한 cpu는 리스트의 앞부분 처리, 다른 cpu는 리스트의 뒷부분 처리

자바의 병렬성과 공유되지 않은 가변 상태

함수형 프로그래밍에서 함수형이란 '함수를 일급값으로 사용한다'는 의미도 있지만 부가적으로 '프로그램이 실행되는 동안 컴포넌트 간에 상호 작용이 일어나지 않는다'는 의미도 포함한다.

### 디폴트 메서드와 자바 모듈
인터페이스를 업데이트하려면 해당 인터페이스를 구현하는 모든 클래스도 업데이트 필요

자바 8 : 디폴트 메서드로 해결
자바 9 : 모듈로 해결

함수를 값처럼 취급 → 메서드와 람다를 일급 시민으로!

→ 다이아몬드 상속 문제 해결

### 함수형 프로그래밍에서 가져온 다른 유용한 아이디어
자바에 포함된 함수형 프로그래밍의 핵심 두 아이디어
1. 메서드와 람다를 일급값으로 사용하는 것
2. 가변 공유 상태가 없는 병렬 실행을 이용해서 효율적이고 안전하게 함수나 메서드를 호출할 수 있다는 것.

스트림은 2개 모두 활용
-  NullPointer 예외를 피할 수 있는 `Optional<T>` 메서드 제공 
- 구조적 패턴 매칭