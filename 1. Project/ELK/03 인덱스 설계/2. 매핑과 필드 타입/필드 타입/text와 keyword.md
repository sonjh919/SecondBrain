#Elasticsearch 



> [!check]+ 
> text : 애널라이저 적용 후 색인 -> 값 분석하여 토큰으로 쪼갠 후 역색인 -> term (전문 검색에 적합)
> keyword : 토큰 쪼개기 x (정렬, 집계, 스크립트 작업 유리, 일치 검색에 적합)

## 문자열 필드 타입
문자열 자료형을 담는 필드에는 text 타입이나 keyword 타입 중 하나를 선택해 적용할 수 있다.

## text
text로 지정된 필드 값은 애널라이저가 적용된 후 색인된다. 들어온 문자열 값 그대로를 가지고 역색인을 구성하는 것이 아니라 **값을 분석하여 여러 토큰으로 쪼갠다.** 이렇게 쪼개진 토큰으로 역색인을 구성한다.
이런 식으로 텀([[term]]) 형태를 만든다.

> [!note]+ term(텀)
> 쪼개진 토큰에 지정한 필터를 적용하는 등의 후처리 작업 후 최종적으로 역색인에 들어가는 형태

애널라이저는 기본으로 standard 애널라이저를 거친다.
## keyword
keyword로 지정된 필드에 들어온 문자열 값은 여러 토큰으로 쪼개지 않고 역색인을 구성한다.
Analyzer(애널라이저)로 분석하는 대신 nomalyzer(노멀라이저)를 적용한다.

> [!note]+ 노멀라이저
> 노멀라이저는 간단한 전처리만을 거친 뒤 커다란 단일 term으로 역색인을 구성한다.

노멀라이저는 명시적으로 지정하지 않으면 아무 작업도 수행하지 않고 전체 문자열로 역색인을 생성한다.

> [!example]+ 
> ```json
> PUT mapping_test/_doc/3
> {
> 	"keywordString": "Hello, World!",
> 	"textString": "Hello, World!"
> }
> ```
> Hello로 검색했을 때, textString에는 검색이 되지만 keywordString을 대상으로 하면 검색되지 않는다.

---

## 정리
### text
+ 애널라이저를 분석하여 여러 토큰으로 쪼개진 텀([[term]])을 역색인에 넣는다.(전문 검색에 적합)
+ 정렬과 집계, 스크립트 작업 시 적합하지 않음([[fielddata]] 캐시 사용)
### keyword
+ 노멀라이저로 전처리한 단일 텀을 역색인에 넣는다.(일치 검색에 적합)
+ 정렬과 집계, 스크립트 작업 시 유용([[doc_values]] 캐시 사용)
