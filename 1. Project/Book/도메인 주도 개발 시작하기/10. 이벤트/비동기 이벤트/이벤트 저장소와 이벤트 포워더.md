#Architecture #DDD #개발서적 

## 이벤트 저장소를 이용한 비동기 처리
이벤트를 비동기로 처리하는 또 다른 방법은 **이벤트를 일단 DB에 저장한 뒤에 별도 프로그램을 이용해서 이벤트 핸들러에 전달하는 방법**이다.

> [!summary]+ 
> 1. 이벤트가 발생하면 핸들러는 DB에 이벤트를 저장한다. 
> 2. 각 프로세스는 해당 DB에 저장된 이벤트를 실행하면 되므로 처리가 될 때까지 이벤트를 읽어와 실행하면 된다. 

즉, **데이터가 누락되거나 손실될 위험이 적다.**

![[event6.png]]

> [!summary]+ 
> 1. 이벤트가 발생하면 핸들러는 스토리지에 이벤트를 저장한다.
> 2. 포워더는 주기적으로 이벤트 저장소에서 이벤트를 가져와 이벤트 핸들러를 실행시킨다.

- 포워더는 **별도 스레드를 이용하므로 이벤트 발행과는 처리가 비동기로 처리**된다. 
- 이벤트를 물리적 저장소에 보관하므로 핸들러 이벤트 처리에 실패할 경우, **포워더는 다시 이벤트 저장소에서 이벤트를 읽어와 핸들러를 실행**하면 된다.