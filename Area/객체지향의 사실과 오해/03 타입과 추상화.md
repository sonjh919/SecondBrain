---
title: 03 타입과 추상화
date: 2024-01-01 16:36
categories:
  - OOP
  - 객체지향의 사실과 오해
tags:
  - OOP
  - 객체지향
  - 개발서적
image: 
path:
---

훌륭한 프로그램을 작성하기 위한 중요한 전제 조건은 **추상화를 정확하게 다루는 능력**이다.

## 추상화
객체지향에 있어서 내가 슬슬 개념적인 이해가 아예 없던 부분이 등장하기 시작했다. 추상화를 처음 들어본다는 것은 아니고, 그동안 코드를 통해서만 배웠기 때문에 코드로 설명하라 하 면 할 순 있겠지만, 개념적으로 생각하고, 고민해본 적은 이번이 처음이었다.

많은 예시들을 봤지만, 지하철 노선도를 이용한 설명은 또 놀라웠다. 추상화에 대한 개념 중에서도 불필요한 점을 도려낸다는 점을 특히 잘 이해할 수 있었다. 추상화를 한번 정리해보도록 하자.

추상화는 현실에서 출발하되 불필요한 부분을 도려내가면서 사물의 놀라운 본질을 드러나게 하는 과정이라고 써져 있지만, 나는 이렇게 이해하는 것이 더 편했다.

어떤 양상, 세부 사항, 구조를 좀 더 명확하게 이해하기 위해 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 **복잡도를 극복하는 방법**
추상화의 수준, 이익, 가치는 목적에 의존적이다.

이상한 나라의 앨리스에서 추상화를 아주 잘 설명하는 문장이 하나 있다.
> **"기껏해야 트럼프에 불과해"**

## 추상화와 복잡성
추상화와 복잡성은 아주 밀접한 연관이 있다. 복잡성을 다루기 위해 추상화는 두 차원에서 이루어진다.

>
+ 첫번째 차원 : 구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 일반화를 통해 단순하게 만드는 것
+ 두번째 차원 : 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거함으로써 단순하게만드는 것

모든 경우에 추상화의 목적은 **복잡성을 이해하기 쉬운 수준으로 단순화하는 것**이다.
**현상은 복잡하다. 법칙은 단순하다. 버릴 게 무엇인지 알아내라.**

## 개념
처음 이 책을 볼때, 개념이라는 말만 보고 이미 알고 있는 내용이라 생각해 빠르게 넘겼었다. 하지만 나중에 다형성에 대한 내용이 나올때, 전혀 이해가 되지 않아 뒤로 가다 다시 이 부분까지 돌아와서 다시 읽은 기억이 있다. 그만큼 개념이 일반적으로 생각하는 그 뜻이 아니라, 객체지향의 세계에서 나름 중요한 부분을 차지한다는 것을 알 수 있었다.

+ 개념은 **공통점을 기반으로 객체들을 묶기 위한 그룹**이다. 
+ 객체란 **특정한 개념을 적용할 수 있는 구체적인 사물**을 의미한다.
+ 개념이 객체에 적용됐을 때 **객체를 개념의 인스턴스**라고 한다.

## 개념의 세 가지 관점
+ **심볼** : 개념을 가리키는 간략한 이름이나 명칭
+ **내연** : 개념의 완전한 정의
+ **외연** : 개념에 속하는 모든 객체의 집합

사실 이 세 관점보다는 **개념을 이용해 객체를 분류**할 수 있다는게 훨씬 중요하다. 그리고 이를 통해 **분류는 추상화를 위한 도구**라는 관점으로 바라볼 수도 있을 것이다.


## 타입은 개념이다
**타입은 개념과 동일**하다. 따라서 타입이란 우리가 인식하고 있는 다양한 사물이나 객체에 적용할 수 있는 아이디어나 관념을 의미한다.

## 다형성
처음 객체지향에 입문했을때 가장 어려웠던 개념이 바로 다형성이었다. 그리고 지금도 어렵다. 물론 설명하라 하면 오버라이딩과 오버로딩이 있어요 Shape을 circle이랑 rectangle로 나눠서 뭐 이렇게 설명할 순 있지만, 이건 내가 원하는 개념이 아니다. 다형성이라는 것이 어느 개념에서부터 출발해 이렇게 발전되었는지, 필요성 이런 것들을 원했다. 다행히 이 책을 읽고 어느 정도 알았지만, 이 부분은 설계 부분에서 고민을 많이 해봐야 조금 더 와닿을 것 같다.

내가 이해한 다형성에 대한 개념 적립의 흐름은 다음과 같이 이루어졌다.
아직은 완벽하게 설명하는 것이 불가능하니, 당분간은 다음과 같은 흐름을 따라 생각해보기로 했다.

 >1. → 객체는 행동이 우선이다.
 >2. → **객체의 타입을 결정하는 적은 객체의 행동뿐**이다.
 >3. → **객체의 내부 표현 방식이 다르더라도 어떤 객체들이 동일하게 행동한다면 그 객체들은 동일한 타입에 속한다.**
 >4. → 같은 타입에 속한 객체는 **행동만 동일하다면 서로 다른 데이터를 가질 수 있다.**
 >5. → 동일한 행동은 동일한 책임을 의미하고, 동일한 책임이란 **동일한 메시지 수신**을 의미한다.
> 6. → 동일한 타입에 속한 객체는 내부의 데이터 표현 형식이 다르더라도 동일한 메시지를 수신하고 이를 처리할 수 있다. 다만 내부의 표현 방식이 다르기 때문에 **동일한 메시지를 처리하는 방식은 서로 다를 수밖에 없다.** 이것이 **다형성**이다. 
{: .prompt-info }

즉 다형성이란, **동일한 요청에 대해 서로 다른 방식으로 응답할 수 있는 능력**이다.
결과적으로 **다형적인 객체들은 동일한 타입**에 속하게 된다.

## 타입의 계층 : 일반화/특수화 관계
책에서는 트럼프와 트럼프 인간 비유를 통해 설명한다. 매우 괜찮은 비유라고 생각된다.
**일반화/특수화 두 타입 관의 관계는 행동에 의해 결정된다.**

+ **일반적인 타입 = 슈퍼타입**
+ **특수한 타입 = 서브타입**

서브타입은 슈퍼타입의 행위와 호환되기 때문에 **서브타입은 슈퍼타입을 대체할 수 있어야 한다.**
어떤 타입을 다른 타입의 서브타입이라고 말할 수 있으려면 다른 타입을 대체할 수 있어야 한다.
결국 일반화는 **추상화를 위한 도구**라고 할 수 있다.

객체지향 패러다임을 통해 세상을 바라보는 거의 대부분의 경우에 분류와 일반화/특수화 기법을 동시에 적용하게 된다.

## 타입의 목적 : 동적 모델과 정적 모델
타입을 이용하면 객체의 동적인 특성을 추상화할 수 있다. 타입은 시간에 따른 객체의 상태 변경이라는 복잡성을 단순화할 수 있는 효과적인 방법인 것이다. 곧, **타입은 추상화다.**

흔히 객체를 생각할 때 두 가지 모델을 동시에 고려한다.
### 동적 모델
**객체가 특정 시점에 어떤 상태를 가지냐**에 대한 것이다.
객체가 살아 움직이는 동안 상태가 어떻게 변하고 어떻게 행동하는지를 포착하는 것

### 정적 모델(타입 모델)
객체가 가질 수 있는 모든 상태와 모든 행동을 **시간에 독립적으로 표현**하는 것이다.
동적으로 변하는 객체의 상태가 아니라 객체가 속한 타입의 **정적인 모습을 표현**하기 때문에 정적 모델이라고도 한다.

객체지향 어플리케이션을 설계 및 구현하기 위해서는 동적모델과 정적 모델을 적절히 혼합해야 한다. 예를 들자면, 클래스를 작성하는 시점은 정적 모델이라고 할 수 있으며 객체의 상태 변경 추적, 디버깅같은 경우는 동적 모델이라고 할 수 있다.

## 클래스는 수단일 뿐이다.
**타입을 구현**하는 가장 보편적인 방법은 클래스를 이용하는 것이다. 클래스는 타입을 구현할 수 있는 여러 구현 메커니즘 중 하나일 뿐이다.

객체 분류 기준은 타입이며, 타입을 나누는 기준은 객체가 수행하는 행동에 따라 이루어진다.

어떻게 보면 되게 좋은 말이지만, 나는 왜인지 모르게 **객체지향이지 클래스 지향이 아니다**는 말에 큰 감명을 받았던지라 그렇게 크게 와닿진 않았다. 이미 알고 있던 개념이라 그럴 수도 있겠다. 하지만, 이것 역시 굉장히 중요한 내용 중 하나라고 생각한다.